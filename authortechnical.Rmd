# Technical Guidelines {#technical}

The technical details of these steps to submitting a blog post or tech note for publication on the rOpenSci website are explained in this chapter:

- Fork the repository (repo) of the rOpenSci website
- Draft your post in R Markdown or Markdown
- Preview and refine your post locally (optional)
- Submit via pull request, preview, and refine your post in the rOpenSci website repo
- Community Manager or other staff member reviews your post
- Revise your post in response to review

## Fork the repo and choose your workflow

Fork the rOpenSci website [repository](https://github.com/ropensci/roweb2). For help with this we recommend [happygitwithr](https://happygitwithr.com/fork-and-clone.html).

Prepare your post in whichever way is most comfortable for you. You can write your post:

- in your favorite editor in R Markdown or Markdown by starting with templates we provide
    - LINK TO .Rmd template here (in Appendix?)
    - LINK TO .md template here (in Appendix?)
- or by using the [roblog helper package](https://docs.ropensci.org/roblog/) created for this purpose. Installing roblog allows you to use RStudio addins to get templates and to run some pre-submission checks.
    - install roblog via `install.packages("roblog", repos = "https://dev.ropensci.org")`
    - Create a new post using the R Markdown or Markdown template
      - in RStudio using the roblog Addin
      - at the command-line using `roblog cmd here`

QUESTION: Do we create 4 templates? one each for blog and technote in Rmd and md? If not, how does a person using the template know what to modify for technote?     

## Walkthrough with code snippets and screenshots

Adapt from [current roweb2 instructions](https://github.com/ropensci/roweb2#contributing-a-blog-post) which are good. Like JOSS, code snippet in md that can be copied, followed by screenshot of preview

### What goes in YAML

INTENT HERE is to show txt of template YAML followed by annotated screenshot of same template YAML explaining each component. Can follow with link to raw post and rendered post for both blog post (rmangal) and technote from a real post.

```{r posttemplate, results="asis"}
show_template("post-template.md", lang = "yaml",
              yaml_only = TRUE)
```

NOTE annotated screenshot of template YAML here file: https://github.com/rosadmin/comms/blob/master/content_n_programs/blog_guide/yamltxt-txtannotated.png

NOTE include advice on tags, info on Twitter cards

### Add an image
from an image file, or created from R code in Rmd, adding alternative text for images

Add image from an image file `{{< figure src = "/img/blog-images/2019-06-04-post-template/name-of-image.png" width = "200" alt = "this is the alternative text" >}}`

Center or right-align an image
`class="center"` or `class="pull-right"`

HMMMM NEED TO PUT SCREENSHOTS HERE TO SHOW IMAGE SIZE AND ALIGNMENT ON PAGE. See https://docs.ropensci.org/roblog/articles/rmd-guidance.html for Rmd template that includes image placement examples.

Every image should be accompanied by alternative text (`alt="some text"`) to make it more accessible to people with disabilities and provide a better user experience for everyone. The alternative text should convey the meaning or content that is displayed in the image. Refer [to this tutorial](https://www.w3.org/WAI/tutorials/images/informative/) for details on what should go in alternative text.

### Add a tweet

Use a Hugo shortcode to embed a tweet e.g. `{{< tweet 1138216112808529920 >}}`

ADD SCREENSHOT of embedded tweet here

### Add a citation

To add citations, refer them in the body of your post:
```
Citation of the primary literature[^1].
Citation of an R package[^2].
Citation of a website[^3].
```

And list your sources at the bottom of your post:

```
[^1]: Sciaini, M., Fritsch, M., Scherer, C., & Simpkins, C. E. (2018). NLMR and landscapetools: An integrated environment for simulating and modifying neutral landscape models in R. Methods in Ecology and Evolution, 9(11), 2240-2248. [doi:10.1111/2041-210X.13076](https://doi.org/10.1111/2041-210X.13076)
[^2]: Elin Waring, Michael Quinn, Amelia McNamara, Eduardo Arino de la Rubia, Hao Zhu and Shannon Ellis (2019). skimr: Compact and Flexible Summaries of Data. R package version 2.0.2. https://CRAN.R-project.org/package=skimr
[^3]: Hugo static site generator. https://gohugo.io/
```

Citations will appear at the bottom of your post like this:
ADD SCREENSHOT HERE of display of footnotes in this post template

#### How to find citation text for a package or article

To get the citation for an R package, run `citation("packagename")`.

To get the citation for an article, you can use the RStudio addin for [rcrossref](https://docs.ropensci.org/rcrossref/), or get the  citation from a paper's DOI by running e.g.

```
> rcrossref::cr_cn("10.1111/2041-210X.13076", format="text", style="apa")

[1] "Sciaini, M., Fritsch, M., Scherer, C., & Simpkins, C. E. (2018). NLMRandlandscapetools: An integrated environment for simulating and modifying neutral landscape models inR. Methods in Ecology and Evolution, 9(11), 2240–2248. doi:10.1111/2041-210x.13076"
```

To get the citation for an article in [Google Scholar](https://scholar.google.com/), find the article, click the quote symbol (in search results under the article) to open the "Cite" window, and copy the APA style text.

ADD THIS SCREENSHOT, annotated to point to quote symbol that opens the Cite window for the text to copy
![](https://i.imgur.com/ZzMt8WE.png)



## Style guide
adapted from: https://github.com/ropenscilabs/roblog/blob/master/vignettes/styleguide.Rmd

- For formatting of package names, functions, and code, follow the [tidyverse style guidance].(https://style.tidyverse.org/documentation.html#r-code).
- Use ### or #### to format headings in your post; larger sizes don't look good. Note long headings with #### don't wrap well.
- Use title case for the title of your post; use sentence case for headings inside the post.
- 'rOpenSci' not 'ROpenSci'
- When adding links to your post, use relative instead of absolute URLs e.g. `/blog/` instead of `https://ropensci.org/blog/`.
- Use [Hugo shortcodes](https://gohugo.io/content-management/shortcodes/#use-hugos-built-in-shortcodes) (not html) to add images, tweets, gists etc.
- Use informative alternative text for all images(LINK to image alt text section above).

## Create or update your author file

### Why?
The rOpenSci website has a page listing [all authors](https://ropensci.org/authors/) who have contributed to a blog post, tech note, or presented in a Community Call. A click on your by-line in a post takes the reader to your author page that has links to your online home, possibly your Twitter or GitHub, and a list of all the content you’ve authored on our site. For staff and leadership team members, editors for software peer review, or members of our Code of Conduct Committee, their rOpenSci title is also listed on their author page.


### How?
If you don't already have an author page, create a folder called `yourfirstname-yourlastname` in your local copy of [`roweb2/content/authors/`](https://github.com/ropensci/roweb2/tree/master/content/authors). You can have accents, middle initials, or hyphens appear in your name if you name your folder appropriately (it can be tricky). If you're not sure how to do this, look at [other people's folder names](https://github.com/ropensci/roweb2/tree/master/content/authors) for examples. 

In that folder, create a file called `_index.md` with information about your online presence. You can copy this template:

```{r authorfiletemplate1, results="asis"}
show_template("author-file-template.md", 
              lang = "yaml",
              details = TRUE
)
```

At minimum, provide your name and a link or your Twitter, GitHub, or GitLab username. Add your usernames or ID's without the "@" or the "https:..."). The link field can be your personal website URL, for example.


**NOTE** Maëlle can you please adapt text to add how to use RStudio add-in or run `roblog::ro_blog_post_author()` as done in https://github.com/ropenscilabs/roblog/blob/master/vignettes/author-file-guidance.Rmd

### Examples 

This author file, [`/authors/kelly-obriant/_index.md`](https://github.com/ropensci/roweb2/blob/master/content/authors/kelly-obriant/_index.md) 

```
---
name: Kelly O'Briant
link: https://kellobri.github.io/
twitter: kellrstats
github: kellobri
---
```

... generates [Kelly O'Briant's author page](https://ropensci.org/authors/kelly-obriant/)

```{r authorpage, fig.cap ="Screenshot of Kelly O'Briant's author page"}
webshot2::webshot("https://ropensci.org/authors/kelly-obriant/",
                  selector = "section.author",
                  expand = c(50, # top
                             0, # right
                             0, # bottom
                             0 #left
                             )
                  )
```


This author file, [`/authors/maëlle-salmon/_index.md'](https://github.com/ropensci/roweb2/blob/master/content/authors/ma%C3%ABlle-salmon/_index.md)

```
---
name: Maëlle Salmon
twitter: ma_salmon
bio: rOpenSci Research Software Engineer, Associate editor of rOpenSci Software Peer Review
github: maelle
gitlab: maelle
keybase: maelle_salmon
orcid: 0000-0002-2815-0399
---
```

... generates [Maëlle Salmon's author page](https://ropensci.org/authors/ma%C3%ABlle-salmon/)

```{r authorpage_salmon, fig.cap ="Screenshot of Maëlle Salmon's author page"}
webshot2::webshot("https://ropensci.org/authors/ma%C3%ABlle-salmon/",
                  selector = "section.author",
                  expand = c(50, # top
                             0, # right
                             0, # bottom
                             0 #left
                             )
                  )
```


## Pre-submission checklists
Instructions to copy the relevant checklist into a comment on your pull request

See roblog "check your post"
- `ro_lint_md()` to check and enforce use of complete alternative descriptions for image, of relative links to rOpenSci website, of Hugo shortcodes for tweets, of lower camelCase for rOpenSci name.
- `ro_check_urls()` https://docs.ropensci.org/roblog/articles/checks-guidance.html


## Submit your draft post
Once you've drafted your blog post, you can preview locally using Hugo or skip to the next step to preview on the pull request.

Knitting the Rmd will generate both .html and .md files. Please do not include the html in your pull request.

Send a pull request from your fork at least one week prior to the publication date to allow time for review. Netlify will start building the new version of the site within seconds and you can preview you changes to make sure everything looks as intended. Otherwise push additional fixes till things look right.

Tag rOpenSci's Community Manager ([@stefaniebutland](https://github.com/stefaniebutland)) to review your pull request.

See r-hub example PR https://github.com/r-hub/blog/pull/50

### Local preview with Hugo

If you wish to preview your post locally, as it will appear in our site, you must install Hugo. To install, refer to [Hugo docs](https://gohugo.io/getting-started/installing/) or run `blogdown::install_hugo()`.

Then run `hugo serve` in the repo directory to start a local server on http://localhost:1313. 

The version of Hugo used by the server is defined in [netlify.toml](https://github.com/ropensci/roweb2/blob/master/netlify.toml).
